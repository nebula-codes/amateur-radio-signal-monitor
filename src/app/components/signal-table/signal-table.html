<div class="table-container">
  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading signal data...</p>
  </div>

  <!-- Data Table -->
  <div *ngIf="!isLoading">
    <mat-table [dataSource]="dataSource" matSort class="signal-table">
      
      <!-- Dynamic Column Definitions -->
      <ng-container *ngFor="let column of columnConfig" [matColumnDef]="column.key">
        <mat-header-cell *matHeaderCellDef mat-sort-header>{{ column.label }}</mat-header-cell>
        <mat-cell *matCellDef="let signal">
          {{ formatCellValue(getCellValue(signal, column.key), column.key) }}
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>

    <!-- Paginator -->
    <mat-paginator 
      #signalPaginator
      [pageSizeOptions]="[10, 25, 50, 100]"
      [pageSize]="10"
      showFirstLastButtons
      aria-label="Select page of signals">
    </mat-paginator>
  </div>
</div>
